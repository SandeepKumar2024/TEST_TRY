{
  "version": 3,
  "sources": ["../../node_modules/react-input-emoji/node_modules/style-inject/dist/style-inject.es.js", "../../node_modules/react-input-emoji/src/utils/emoji-utils.js", "../../node_modules/react-input-emoji/src/utils/input-event-utils.js", "../../node_modules/react-input-emoji/src/hooks/use-sanitize.js", "../../node_modules/react-input-emoji/src/hooks/use-expose.js", "../../node_modules/react-input-emoji/src/hooks/use-emit.js", "../../node_modules/react-input-emoji/src/text-input.js", "../../node_modules/react-input-emoji/src/components/emoji-picker-button.js", "../../node_modules/react-input-emoji/node_modules/@emoji-mart/react/dist/module.js", "../../node_modules/react-input-emoji/src/components/emoji-picker.js", "../../node_modules/react-input-emoji/src/components/emoji-picker-container.js", "../../node_modules/react-input-emoji/src/components/emoji-picker-wrapper.js", "../../node_modules/react-input-emoji/src/utils/mention-utils.js", "../../node_modules/react-input-emoji/src/hooks/use-mention.js", "../../node_modules/react-input-emoji/src/components/mention-user-list.js", "../../node_modules/react-input-emoji/src/components/mention-wrapper.js", "../../node_modules/react-input-emoji/src/utils/observer.js", "../../node_modules/react-input-emoji/src/hooks/use-event-listeners.js", "../../node_modules/react-input-emoji/src/hooks/user-pollute.js", "../../node_modules/react-input-emoji/src/index.js"],
  "sourcesContent": ["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n", "/* eslint-disable valid-jsdoc */\n// @ts-check\n\nexport const TRANSPARENT_GIF =\n  \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\n\nexport const EMOJI_STYLE = \"\";\n\n/**\n * Replace all text with emoji with an image html tag\n * @param {string} text\n * @return {string}\n */\nexport function replaceAllTextEmojis(text) {\n  let allEmojis = getAllEmojisFromText(text);\n\n  if (allEmojis) {\n    allEmojis = [...new Set(allEmojis)]; // remove duplicates\n\n    allEmojis.forEach(emoji => {\n      text = replaceAll(text, emoji, getInputEmojiHTML('', emoji));\n    });\n  }\n\n  return text;\n}\n\n/**\n * Replace all occurrencies in a string\n * @param {string} str\n * @param {string} find\n * @param {string} replace\n * @return {string}\n */\nfunction replaceAll(str, find, replace) {\n  return str.replace(new RegExp(find, \"g\"), replace);\n}\n\n/**\n * Get all emojis from the text\n * @param {string} text\n * @return {string[]}\n */\nfunction getAllEmojisFromText(text) {\n  return text.match(\n    /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?)*/g\n  );\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * @param { import(\"../types/types\").EmojiMartItem } emoji\n * @return {string}\n */\nexport function getImageEmoji(emoji) {\n  /** @type {HTMLElement | null} */\n  const emojiPickerEl = document.querySelector('em-emoji-picker')\n\n  if (!emojiPickerEl) {\n    return getInputEmojiNativeHTML(emoji.native)\n  }\n\n  /** @type {HTMLSpanElement | null=} */\n  const emojiSpanEl = emojiPickerEl?.shadowRoot?.querySelector(`[title=\"${emoji.name}\"] > span > span`)\n\n  if (!emojiSpanEl) {\n    return getInputEmojiNativeHTML(emoji.native)\n  }\n\n  const style = replaceAll(emojiSpanEl.style.cssText, '\"', \"'\");\n\n  return getInputEmojiHTML(style, emoji.native);\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * @param {string} style\n * @param {string} emoji\n * @returns\n */\nfunction getInputEmojiHTML(style, emoji) {\n  return `<img style=\"${style}; display: inline-block\" data-emoji=\"${emoji}\" src=\"${TRANSPARENT_GIF}\" />`;\n}\n\n/**\n * \n * @param {string} emoji \n * @returns \n */\nfunction getInputEmojiNativeHTML(emoji) {\n  return `<span class=\"width: 18px; height: 18px; display: inline-block; margin: 0 1px;\">${emoji}</span>`;\n}\n\n/**\n *\n * @param {string} html\n * @return {string}\n */\nexport function replaceAllTextEmojiToString(html) {\n  const container = document.createElement(\"div\");\n  container.innerHTML = html;\n\n  const images = Array.prototype.slice.call(container.querySelectorAll(\"img\"));\n\n  images.forEach(image => {\n    container.innerHTML = container.innerHTML.replace(\n      image.outerHTML,\n      image.dataset.emoji\n    );\n  });\n\n  return container.innerHTML;\n}\n", "// @ts-check\n\nimport {\n  getImageEmoji,\n  replaceAllTextEmojis,\n  replaceAllTextEmojiToString,\n} from \"./emoji-utils\";\n\n/**\n * Handle copy of current selected text\n * @param {React.ClipboardEvent} event\n */\nexport function handleCopy(event) {\n  const selectedText = window.getSelection();\n\n  if (selectedText === null) {\n    return;\n  }\n\n  let container = document.createElement(\"div\");\n\n  for (let i = 0, len = selectedText.rangeCount; i < len; ++i) {\n    container.appendChild(selectedText.getRangeAt(i).cloneContents());\n  }\n\n  container = replaceEmojiToString(container);\n\n  event.clipboardData.setData(\"text\", container.innerText);\n  event.preventDefault();\n}\n\n/**\n *\n * @param {string} html\n */\nexport function handlePasteHtmlAtCaret(html) {\n  let sel;\n  let range;\n  if (window.getSelection) {\n    // IE9 and non-IE\n    sel = window.getSelection();\n\n    if (sel === null) return;\n\n    if (sel.getRangeAt && sel.rangeCount) {\n      range = sel.getRangeAt(0);\n      range.deleteContents();\n\n      // Range.createContextualFragment() would be useful here but is\n      // non-standard and not supported in all browsers (IE9, for one)\n      const el = document.createElement(\"div\");\n      el.innerHTML = html;\n      const frag = document.createDocumentFragment();\n      let node;\n      let lastNode;\n      while ((node = el.firstChild)) {\n        lastNode = frag.appendChild(node);\n      }\n      range.insertNode(frag);\n\n      // Preserve the selection\n      if (lastNode) {\n        range = range.cloneRange();\n        range.setStartAfter(lastNode);\n        range.collapse(true);\n        sel.removeAllRanges();\n        sel.addRange(range);\n      }\n    }\n  }\n}\n\n/**\n * Replace emoji img to its string value\n * @param {HTMLDivElement} container\n * @return {HTMLDivElement}\n */\nfunction replaceEmojiToString(container) {\n  const images = Array.prototype.slice.call(container.querySelectorAll(\"img\"));\n\n  images.forEach((image) => {\n    image.outerHTML = image.dataset.emoji;\n  });\n\n  return container;\n}\n\n/**\n * Handle past on input\n * @param {React.ClipboardEvent} event\n */\nexport function handlePaste(event) {\n  event.preventDefault();\n  let content;\n  if (event.clipboardData) {\n    content = event.clipboardData.getData(\"text/plain\");\n    content = replaceAllTextEmojis(content);\n    document.execCommand(\"insertHTML\", false, content);\n  }\n}\n\n/**\n * @typedef {object} HandleKeyDownOptions\n * @property {HTMLDivElement} placeholderEl\n * @property {number} maxLength\n * @property {HTMLDivElement} inputEl\n * @property {React.MutableRefObject<string>} cleanedTextRef\n * @property {React.MutableRefObject<HTMLDivElement>} textInputRef\n * @property {boolean} cleanOnEnter\n * @property {function(): void} emitChange\n * @property {(function(string): void)=} onEnter\n * @property {(function(KeyboardEvent): void)=} onKeyDown\n * @property {(function(string): void)} updateHTML\n */\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @typedef {Object} HandleSelectEmojiProps\n * @property {import(\"../types/types\").EmojiMartItem} emoji\n * @property {React.MutableRefObject<import('../text-input').Ref>} textInputRef\n * @property {boolean} keepOpened\n * @property {() => void} toggleShowPicker\n * @property {number=} maxLength\n */\n\n/**\n *\n * @param {HandleSelectEmojiProps} props\n */\nexport function handleSelectEmoji({\n  emoji,\n  textInputRef,\n  keepOpened,\n  toggleShowPicker,\n  maxLength,\n}) {\n  if (\n    typeof maxLength !== \"undefined\" &&\n    totalCharacters(textInputRef.current) >= maxLength\n  ) {\n    return;\n  }\n\n  textInputRef.current.appendContent(getImageEmoji(emoji));\n\n  if (!keepOpened) {\n    toggleShowPicker();\n  }\n}\n\n/**\n *\n * @param {{text: string, html: string}} props\n * @return {number}\n */\nexport function totalCharacters({ text, html }) {\n  const textCount = text.length;\n  const emojisCount = (html.match(/<img/g) || []).length;\n\n  return textCount + emojisCount;\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * Handle keyup event\n * @param {() => void} emitChange\n * @param {(event: KeyboardEvent) => void} onKeyDownMention\n * @param {React.MutableRefObject<string>} cleanedTextRef\n * @param {React.MutableRefObject<HTMLDivElement>} textInputRef\n * @return {(event: KeyboardEvent) => void}\n */\nexport function handleKeyup(\n  emitChange,\n  onKeyDownMention,\n  cleanedTextRef,\n  textInputRef,\n) {\n  return (event) => {\n    const text = replaceAllTextEmojiToString(textInputRef.current.innerHTML);\n    cleanedTextRef.current = text;\n    emitChange();\n    onKeyDownMention(event);\n  };\n}\n\n/**\n * Handle focus event\n * @param {function(FocusEvent): void} onFocus\n * @return {function(FocusEvent): void}\n */\nexport function handleFocus(onFocus) {\n  return (event) => {\n    onFocus(event);\n  };\n}\n\n/**\n * Set caret to the end of text value\n * @param {React.MutableRefObject<HTMLDivElement| null>} input\n */\nexport function moveCaretToEnd(input) {\n  let range;\n  let selection;\n  if (document.createRange && input.current) {\n    range = document.createRange();\n    range.selectNodeContents(input.current);\n    range.collapse(false);\n    selection = window.getSelection();\n    if (selection) {\n      selection.removeAllRanges();\n      selection.addRange(range);\n    }\n  }\n}\n/**\n *\n * @param {HTMLDivElement} inputDiv\n * @return {string}\n */\nexport function removeHtmlExceptBr(inputDiv) {\n  const temp = inputDiv.innerHTML.replace(/<br\\s*\\/?>/gi, \"[BR]\"); // temporarily replace <br> with placeholder\n  const stripped = temp.replace(/<[^>]+>/g, \"\"); // strip all html tags\n  const final = stripped.replace(/\\[BR\\]/gi, \"</br>\"); // replace placeholders with <br>\n  return final;\n}\n\n/**\n * \n * @param {*} range \n * @returns \n */\nexport function getSelectionStart(range) {\n  let node = range.startContainer;\n  let offset = range.startOffset;\n\n  // Handle cases where the selection start node is not a text node\n  if (node.nodeType !== Node.TEXT_NODE) {\n    while (node.nodeType !== Node.TEXT_NODE) {\n      node = node.nextSibling;\n      if (!node) break;\n    }\n    if (!node) {\n      node = range.commonAncestorContainer;\n      while (node.nodeType !== Node.TEXT_NODE) {\n        node = node.firstChild;\n      }\n    }\n    offset = 0;\n  }\n\n  return { node, offset };\n}\n\n/**\n * \n * @returns {Object} cursor\n */\nexport function getCursor() {\n  const selection = window.getSelection();\n  const range = selection.getRangeAt(0);\n  const selectionStart = getSelectionStart(range);\n\n  return  {selection, range, selectionStart}\n}\n\n/**\n *\n */\nexport function addLineBreak() {\n  const { selection, range, selectionStart } = getCursor()\n\n  // If cursor is at the end of the text content, add one more line break\n  if (\n    selection.isCollapsed &&\n    selectionStart.offset === selectionStart.node.textContent.length\n  ) {\n    const br = document.createElement(\"br\");\n    range.insertNode(br);\n    range.setStartAfter(br);\n    range.setEndAfter(br);\n    selection.removeAllRanges();\n    selection.addRange(range);\n\n    const br2 = document.createElement(\"br\");\n    range.insertNode(br2);\n    range.setStartAfter(br2);\n    range.setEndAfter(br2);\n    selection.removeAllRanges();\n    selection.addRange(range);\n  } else {\n    const br = document.createElement(\"br\");\n    range.insertNode(br);\n    range.setStartAfter(br);\n    range.setEndAfter(br);\n    selection.removeAllRanges();\n    selection.addRange(range);\n    // Set cursor position right before the first letter after the line break\n    if (\n      selectionStart.node.nextSibling &&\n      selectionStart.node.nextSibling.nodeType === Node.TEXT_NODE\n    ) {\n      range.setStart(selectionStart.node.nextSibling, 1);\n      range.setEnd(selectionStart.node.nextSibling, 1);\n    }\n    selection.removeAllRanges();\n    selection.addRange(range);\n  }\n}\n", "// @ts-check\n\nimport { useCallback, useRef } from \"react\";\nimport { removeHtmlExceptBr } from \"../utils/input-event-utils\";\n\n/**\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\n */\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @param {boolean} shouldReturn\n */\nexport function useSanitize(shouldReturn) {\n  /** @type {React.MutableRefObject<SanitizeFn[]>} */\n  const sanitizeFnsRef = useRef([]);\n\n  const sanitizedTextRef = useRef(\"\");\n\n  /** @type {(fn: SanitizeFn) => void} */\n  const addSanitizeFn = useCallback(fn => {\n    sanitizeFnsRef.current.push(fn);\n  }, []);\n\n  /** @type {(html: string) => string} */\n  const sanitize = useCallback(html => {\n    let result = sanitizeFnsRef.current.reduce((acc, fn) => {\n      return fn(acc);\n    }, html);\n\n    result = replaceAllHtmlToString(result, shouldReturn);\n\n    sanitizedTextRef.current = result;\n\n    return result;\n  }, []);\n\n  return { addSanitizeFn, sanitize, sanitizedTextRef };\n}\n\n/**\n *\n * @param {string} html\n * @param {boolean} shouldReturn\n * @return {string}\n */\nexport function replaceAllHtmlToString(html, shouldReturn) {\n  const container = document.createElement(\"div\");\n  container.innerHTML = html;\n  let text\n  if(shouldReturn) {\n    text = removeHtmlExceptBr(container)\n  } else {\n    text = container.innerText || \"\";\n  }\n\n  // remove all ↵ for safari\n  text = text.replace(/\\n/gi, \"\");\n\n  return text;\n}\n", "// @ts-check\n\nimport { useImperativeHandle } from \"react\";\nimport { useSanitize } from \"./use-sanitize\";\n\n/**\n * @typedef {Object} Props\n * @property {React.Ref<any>} ref\n * @property {React.MutableRefObject<import('../text-input').Ref | null>} textInputRef\n * @property {(value: string) => void} setValue\n * @property {() => void} emitChange\n */\n\n/**\n *\n * @param {Props} props\n */\nexport function useExpose({ ref, textInputRef, setValue, emitChange }) {\n  const { sanitize, sanitizedTextRef } = useSanitize(false);\n\n  useImperativeHandle(ref, () => ({\n    get value() {\n      return sanitizedTextRef.current;\n    },\n    set value(value) {\n      setValue(value);\n    },\n    focus: () => {\n      if (textInputRef.current === null) return\n      textInputRef.current.focus();\n    },\n    blur: () => {\n      if (textInputRef.current !== null) {\n        sanitize(textInputRef.current.html);\n\n      }\n\n      emitChange();\n    }\n  }));\n}\n", "// @ts-check\n\nimport { useCallback, useEffect, useRef } from \"react\";\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * useEmit\n * @param {React.MutableRefObject<import('../text-input').Ref | null>} textInputRef\n * @param {(size: {width: number, height: number}) => void} onResize\n * @param {(text: string) => void} onChange\n */\nexport function useEmit(textInputRef, onResize, onChange) {\n  /** @type {React.MutableRefObject<{width: number; height: number} | null>} */\n  const currentSizeRef = useRef(null);\n  const onChangeFn = useRef(onChange);\n\n  const checkAndEmitResize = useCallback(() => {\n    if (textInputRef.current !== null) {\n      const currentSize = currentSizeRef.current;\n\n      const nextSize = textInputRef.current.size;\n\n      if (\n        (!currentSize ||\n          currentSize.width !== nextSize.width ||\n          currentSize.height !== nextSize.height) &&\n        typeof onResize === \"function\"\n      ) {\n        onResize(nextSize);\n      }\n\n      currentSizeRef.current = nextSize;\n    }\n  }, [onResize, textInputRef]);\n\n  const emitChange = useCallback((sanitizedText) => {\n    if (typeof onChangeFn.current === \"function\") {\n      onChangeFn.current(sanitizedText);\n    }\n\n    if (typeof onResize === \"function\") {\n      checkAndEmitResize();\n    }\n  }, [checkAndEmitResize, onResize]);\n\n  useEffect(() => {\n    if (textInputRef.current) {\n      checkAndEmitResize();\n    }\n  }, [checkAndEmitResize, textInputRef]);\n\n  return emitChange;\n}\n", "// @ts-check\n// vendors\nimport React, { useImperativeHandle, forwardRef, useRef } from \"react\";\nimport { addLineBreak, handlePasteHtmlAtCaret } from \"./utils/input-event-utils\";\nimport { replaceAllTextEmojiToString } from \"./utils/emoji-utils\";\n\n/**\n * @typedef {Object} Props\n * @property {(event: React.KeyboardEvent) => void} onKeyDown\n * @property {(event: React.KeyboardEvent) => void} onKeyUp\n * @property {() => void} onFocus\n * @property {() => void} onBlur\n * @property {(sanitizedText: string) => void=} onChange\n * @property {(event: React.KeyboardEvent) => void} onArrowUp\n * @property {(event: React.KeyboardEvent) => void} onArrowDown\n * @property {(event: React.KeyboardEvent) => void} onEnter\n * @property {boolean} shouldReturn\n * @property {(event: React.ClipboardEvent) => void} onCopy\n * @property {(event: React.ClipboardEvent) => void} onPaste\n * @property {string} placeholder\n * @property {React.CSSProperties} style\n * @property {number} tabIndex\n * @property {string} className\n * @property {(html: string) => void} onChange\n */\n\n/**\n * @typedef {{\n *  appendContent: (html: string) => void;\n *  html: string;\n *  text: string;\n *  size: { width: number; height: number;};\n *  focus: () => void;\n * }} Ref\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.ForwardRefRenderFunction<Ref, Props>} */\nconst TextInput = (\n  { placeholder, style, tabIndex, className, onChange, ...props },\n  ref\n) => {\n  useImperativeHandle(ref, () => ({\n    appendContent: html => {\n      if (textInputRef.current) {\n        textInputRef.current.focus();\n      }\n\n      handlePasteHtmlAtCaret(html);\n\n      if (textInputRef.current) {\n        textInputRef.current.focus();\n      }\n\n      if (textInputRef.current && placeholderRef.current && replaceAllTextEmojiToString(textInputRef.current.innerHTML) === \"\") {\n        placeholderRef.current.style.visibility = \"visible\";\n      } else if (placeholderRef.current) {\n        placeholderRef.current.style.visibility = \"hidden\";\n      }\n\n      if (textInputRef.current && typeof onChange === 'function') {\n        onChange(textInputRef.current.innerHTML);\n      }\n    },\n    set html(value) {\n      if (textInputRef.current) {\n        textInputRef.current.innerHTML = value;\n      }\n      \n      if (placeholderRef.current) {\n        const text = replaceAllTextEmojiToString(value)\n        if (text === \"\") {\n          placeholderRef.current.style.visibility = \"visible\";\n        } else {\n          placeholderRef.current.style.visibility = \"hidden\";\n        }\n      }\n\n      if (typeof onChange === 'function' && textInputRef.current) {\n        onChange(textInputRef.current.innerHTML);\n      }\n    },\n    get html() {\n      if (!textInputRef.current) return ''\n\n      return textInputRef.current.innerHTML;\n    },\n    get text() {\n      if (!textInputRef.current) return ''\n\n      return textInputRef.current.innerText;\n    },\n    get size() {\n      if (!textInputRef.current) {\n        return {\n          width: 0,\n          height: 0\n        }\n      }\n\n      return {\n        width: textInputRef.current.offsetWidth,\n        height: textInputRef.current.offsetHeight\n      };\n    },\n    focus() {\n      if (!textInputRef.current) return\n\n      textInputRef.current.focus();\n    }\n  }));\n\n  /** @type {React.MutableRefObject<HTMLDivElement | null>} */\n  const placeholderRef = useRef(null);\n  /** @type {React.MutableRefObject<HTMLDivElement | null>} */\n  const textInputRef = useRef(null);\n\n  /**\n   *\n   * @param {React.KeyboardEvent} event\n   */\n  function handleKeyDown(event) {    \n    if (event.key === \"Enter\" && (event.shiftKey === true || event.ctrlKey === true) && props.shouldReturn) {\n      event.preventDefault();\n      if(textInputRef.current) {\n        addLineBreak()\n        return;\n      }\n    } \n    if (event.key === \"Enter\") {\n      props.onEnter(event);\n    } else if (event.key === \"ArrowUp\") {\n      props.onArrowUp(event);\n    } else if (event.key === \"ArrowDown\") {\n      props.onArrowDown(event);\n    } else {\n      if (event.key.length === 1 && placeholderRef.current) {\n        placeholderRef.current.style.visibility = \"hidden\";\n      }\n    }\n\n    props.onKeyDown(event);\n  }\n\n  /** */\n  function handleClick() {\n    props.onFocus();\n  }\n\n  /**\n   *\n   * @param {React.KeyboardEvent} event\n   */\n  function handleKeyUp(event) {\n    props.onKeyUp(event);\n\n    const input = textInputRef.current;\n\n    if (placeholderRef.current && input) {\n      const text = replaceAllTextEmojiToString(input.innerHTML)\n      if (text === \"\") {\n        placeholderRef.current.style.visibility = \"visible\";\n      } else {\n        placeholderRef.current.style.visibility = \"hidden\";\n      }\n    }\n\n    if (typeof onChange === 'function' && textInputRef.current) {\n      onChange(textInputRef.current.innerHTML);\n    }\n  }\n\n  return (\n    <div className=\"react-input-emoji--container\" style={style}>\n      <div className=\"react-input-emoji--wrapper\" onClick={handleClick}>\n        <div ref={placeholderRef} className=\"react-input-emoji--placeholder\">\n          {placeholder}\n        </div>\n        <div\n          ref={textInputRef}\n          onKeyDown={handleKeyDown}\n          onKeyUp={handleKeyUp}\n          tabIndex={tabIndex}\n          contentEditable\n          className={`react-input-emoji--input${className ? ` ${className}` : \"\"\n            }`}\n          onBlur={props.onBlur}\n          onCopy={props.onCopy}\n          onPaste={props.onPaste}\n          data-testid=\"react-input-emoji--input\"\n        />\n      </div>\n    </div>\n  );\n};\n\nconst TextInputWithRef = forwardRef(TextInput);\n\nexport default TextInputWithRef;\n", "// vendors\nimport React, { useEffect, useRef, useState } from \"react\";\n\n/**\n * @typedef {object} Props\n * @property {boolean} showPicker\n * @property {(event: React.MouseEvent) => void} toggleShowPicker\n * @property {HTMLDivElement=} buttonElement\n * @property {React.MutableRefObject=} buttonRef\n */\n\n/**\n * Emoji Picker Button Component\n * @param {Props} props\n * @return {JSX.Element}\n */\nfunction EmojiPickerButton({ showPicker, toggleShowPicker, buttonElement, buttonRef }) {\n  \n  const localButtonRef = useRef(null);\n  const [showCustomButtonContent, setShowCustomButtonContent] = useState(false);\n\n  useEffect(() => {\n    if ((buttonRef?.current?.childNodes?.length ?? 0) > 2) {\n      localButtonRef.current.appendChild(buttonRef.current.childNodes[0]);\n      setShowCustomButtonContent(true);\n    } else if ((buttonElement?.childNodes?.length ?? 0) > 2) {\n      localButtonRef.current.appendChild(buttonElement?.childNodes[0]);\n      setShowCustomButtonContent(true);\n    }\n  }, [buttonElement?.childNodes]);\n\n  return (\n    <button\n      ref={localButtonRef}\n      type=\"button\"\n      className={`react-input-emoji--button${\n        showPicker ? \" react-input-emoji--button__show\" : \"\"\n      }`}\n      onClick={toggleShowPicker}\n    >\n      {!showCustomButtonContent && (\n        <svg\n          xmlns=\"http://www.w3.org/2000/svg\"\n          viewBox=\"0 0 24 24\"\n          width=\"24\"\n          height=\"24\"\n          className=\"react-input-emoji--button--icon\"\n        >\n          {/* eslint-disable-next-line max-len */}\n          <path d=\"M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0m0 22C6.486 22 2 17.514 2 12S6.486 2 12 2s10 4.486 10 10-4.486 10-10 10\" />\n          {/* eslint-disable-next-line max-len */}\n          <path d=\"M8 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 8 7M16 7a2 2 0 1 0-.001 3.999A2 2 0 0 0 16 7M15.232 15c-.693 1.195-1.87 2-3.349 2-1.477 0-2.655-.805-3.347-2H15m3-2H6a6 6 0 1 0 12 0\" />\n        </svg>\n      )}\n    </button>\n  );\n}\n\nexport default EmojiPickerButton;\n", "import $dvPge$react, {useRef as $dvPge$useRef, useEffect as $dvPge$useEffect} from \"react\";\nimport {Picker as $dvPge$Picker} from \"emoji-mart\";\n\n\n\nfunction $e5534fc185f7111e$export$2e2bcd8739ae039(props) {\n    const ref = (0, $dvPge$useRef)(null);\n    const instance = (0, $dvPge$useRef)(null);\n    if (instance.current) instance.current.update(props);\n    (0, $dvPge$useEffect)(()=>{\n        instance.current = new (0, $dvPge$Picker)({\n            ...props,\n            ref: ref\n        });\n        return ()=>{\n            instance.current = null;\n        };\n    }, []);\n    return /*#__PURE__*/ (0, $dvPge$react).createElement(\"div\", {\n        ref: ref\n    });\n}\n\n\nexport {$e5534fc185f7111e$export$2e2bcd8739ae039 as default};\n//# sourceMappingURL=module.js.map\n", "// vendors\nimport React, { memo, useMemo } from \"react\";\nimport Picker from \"@emoji-mart/react\";\n\n/**\n * @typedef {object} Props\n * @property {'light' | 'dark' | 'auto'} theme\n * @property {function(import(\"../types/types\").EmojiMartItem): void} onSelectEmoji\n * @property {boolean} disableRecent\n * @property {any[]=} customEmojis\n * @property {import('../types/types').Languages=} language\n */\n\n/**\n * Emoji Picker Component\n * @param {Props} props\n */\nfunction EmojiPicker(props) {\n  const { theme, onSelectEmoji, disableRecent, customEmojis, language } = props;\n\n  /** @type {string[]} */\n  const categories = useMemo(() => {\n    /** @type {string[]} */\n    let categoryies = [];\n\n    if (!disableRecent) {\n      categoryies.push(\"frequent\");\n    }\n\n    categoryies = [\n      ...categoryies,\n      \"people\",\n      \"nature\",\n      \"foods\",\n      \"activity\",\n      \"places\",\n      \"objects\",\n      \"symbols\",\n      \"flags\"\n    ];\n\n    return categoryies;\n  }, [disableRecent]);\n\n  const i18n = useMemo(() => {\n    if (!language) {\n      return undefined\n    }\n\n    return require(`@emoji-mart/data/i18n/${language ?? 'en'}.json`)\n  }, [language])\n\n  return (\n    <Picker\n      data={undefined}\n      theme={theme}\n      previewPosition=\"none\"\n      onEmojiSelect={onSelectEmoji}\n      custom={customEmojis}\n      categories={categories}\n      set=\"apple\"\n      i18n={i18n}\n    />\n  );\n}\n\n\nexport default memo(EmojiPicker);\n", "import React from \"react\";\nimport EmojiPicker from \"./emoji-picker\";\n\n/**\n * @typedef {object} Props\n * @property {boolean} showPicker\n * @property {'light' | 'dark' | 'auto'} theme\n * @property {(emoji: import(\"../types/types\").EmojiMartItem) => void} handleSelectEmoji\n * @property {boolean} disableRecent\n * @property {any[]=} customEmojis\n * @property {('above' | 'below')=} position\n * @property {import('../types/types').Languages=} language\n */\n\n/**\n * Emoji Picker Button Component\n * @param {Props} props\n * @return {JSX.Element}\n */\nfunction EmojiPickerContainer({\n  showPicker,\n  theme,\n  handleSelectEmoji,\n  disableRecent,\n  customEmojis,\n  position,\n  language\n}) {\n  return (\n    <div className=\"react-emoji-picker--container\">\n      {showPicker && (\n        <div\n          className=\"react-emoji-picker--wrapper\"\n          onClick={evt => evt.stopPropagation()}\n          style={position === 'below' ? {top: '40px'} : {}}\n        >\n          <div className=\"react-emoji-picker\">\n            <EmojiPicker\n              theme={theme}\n              onSelectEmoji={handleSelectEmoji}\n              disableRecent={disableRecent}\n              customEmojis={customEmojis}\n              language={language}\n            />\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default EmojiPickerContainer;\n", "// @ts-check\n// vendors\nimport React, { useEffect, useState } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport {\n  getImageEmoji,\n  replaceAllTextEmojis,\n  replaceAllTextEmojiToString\n} from \"../utils/emoji-utils\";\n\nimport EmojiPickerButton from \"./emoji-picker-button\";\nimport EmojiPickerContainer from \"./emoji-picker-container\";\n\nconst EMOJI_PICKER_CONTAINER_HEIGHT = 435;\n\n/**\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\n */\n\n/**\n * @typedef {import('../types/types').PolluteFn} PolluteFn\n */\n\n/**\n * @typedef {Object} Props\n * @property {'light' | 'dark' | 'auto'} theme\n * @property {boolean} keepOpened\n * @property {boolean} disableRecent\n * @property {any[]=} customEmojis\n * @property {(fn: SanitizeFn) => void} addSanitizeFn\n * @property {(fn: PolluteFn) => void} addPolluteFn\n * @property {(html: string) => void} appendContent\n * @property {HTMLDivElement=} buttonElement\n * @property {React.MutableRefObject=} buttonRef\n * @property {import('../types/types').Languages=} language\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.FC<Props>} */\nconst EmojiPickerWrapper = props => {\n  const {\n    theme,\n    keepOpened,\n    disableRecent,\n    customEmojis,\n    addSanitizeFn,\n    addPolluteFn,\n    appendContent,\n    buttonElement,\n    buttonRef,\n    language\n  } = props;\n\n  const [showPicker, setShowPicker] = useState(false);\n  /** @type {[HTMLDivElement | undefined, React.Dispatch<React.SetStateAction<HTMLDivElement | undefined>>]} */\n  const [customButton, setCustomButton] = useState();\n  /** @type {['above' | 'below' | undefined, React.Dispatch<React.SetStateAction<'above' | 'below' | undefined>>]} */\n  const [emojiPickerPosition, setEmojiPickerPosition] = useState()\n\n  useEffect(() => {\n    addSanitizeFn(replaceAllTextEmojiToString);\n  }, [addSanitizeFn]);\n\n  useEffect(() => {\n    addPolluteFn(replaceAllTextEmojis);\n  }, [addPolluteFn]);\n\n  useEffect(() => {\n    /**\n     *\n     * @param {MouseEvent} event\n     */\n    function checkClickOutside(event) {\n      /** @type {HTMLElement} */\n      // @ts-ignore\n      const element = event.target;\n\n      if (\n        element.classList.contains(\"react-input-emoji--button\") ||\n        element.classList.contains(\"react-input-emoji--button--icon\")\n      ) {\n        return;\n      }\n\n      setShowPicker(false);\n    }\n\n    document.addEventListener(\"click\", checkClickOutside);\n\n    return () => {\n      document.removeEventListener(\"click\", checkClickOutside);\n    };\n  }, []);\n\n  /**\n   *\n   * @param {React.MouseEvent} event\n   */\n  function toggleShowPicker(event) {\n    event.stopPropagation();\n    event.preventDefault();\n\n    setEmojiPickerPosition(calcTopPosition(event))\n\n    setShowPicker(currentShowPicker => !currentShowPicker);\n  }\n\n  /**\n   * \n   * @param {React.MouseEvent} event\n   * @return {'above' | 'below'}\n   */\n  function calcTopPosition(event) {\n    const btn = event.currentTarget\n    const btnRect = btn.getBoundingClientRect();\n\n    const popoverHeight = EMOJI_PICKER_CONTAINER_HEIGHT;\n\n    // Decide to display above or below based on available space\n    if (btnRect.top >= popoverHeight) {\n        // Display above\n        return 'above'\n    } else {\n        // Display below\n        return 'below'\n    }\n  }\n\n  // eslint-disable-next-line valid-jsdoc\n  /**\n   *\n   * @param {import(\"../types/types\").EmojiMartItem} emoji\n   */\n  function handleSelectEmoji(emoji) {\n    appendContent(getImageEmoji(emoji));\n\n    if (!keepOpened) {\n      setShowPicker(currentShowPicker => !currentShowPicker);\n    }\n  }\n\n  useEffect(() => {\n    if (buttonRef?.current?.style) {\n      buttonRef.current.style.position = \"relative\";\n      setCustomButton(buttonRef.current);\n    }  else if (buttonElement?.style) {\n      buttonElement.style.position = \"relative\";\n      setCustomButton(buttonElement);\n    }\n  }, [buttonRef, buttonElement]);\n\n  return customButton ? (\n    (ReactDOM.createPortal(\n      <>\n        <EmojiPickerContainer\n          showPicker={showPicker}\n          theme={theme}\n          handleSelectEmoji={handleSelectEmoji}\n          disableRecent={disableRecent}\n          customEmojis={customEmojis}\n          position={emojiPickerPosition}\n          language={language}\n        />\n        <EmojiPickerButton\n          showPicker={showPicker}\n          toggleShowPicker={toggleShowPicker}\n          buttonElement={customButton}\n          buttonRef={buttonRef}\n        />\n      </>,\n      customButton\n    ))\n  ) : (\n    (<>\n      <EmojiPickerContainer\n        showPicker={showPicker}\n        theme={theme}\n        handleSelectEmoji={handleSelectEmoji}\n        disableRecent={disableRecent}\n        customEmojis={customEmojis}\n        position={emojiPickerPosition}\n        language={language}\n      />\n      <EmojiPickerButton\n        showPicker={showPicker}\n        toggleShowPicker={toggleShowPicker}\n      />\n    </>)\n  );\n};\n\nexport default EmojiPickerWrapper;\n", "// @ts-check\n\n/**\n *\n * @return {string | null}\n */\nexport function getTextFromAtToCaret() {\n  const range = getRangeFromAtToCaret();\n\n  if (!range) return null;\n\n  const text = range.text.substring(range.begin, range.end);\n\n  return text || null;\n}\n\n// eslint-disable-next-line valid-jsdoc\n/** */\nexport function deleteTextFromAtToCaret() {\n  const range = getRangeFromAtToCaret();\n\n  if (!range) return;\n\n  // @ts-ignore\n  range.element.deleteData(range.begin, range.end - range.begin);\n}\n\n/**\n *\n * @return {{begin: number, end: number, text: string, element: Node} | null}\n */\nfunction getRangeFromAtToCaret() {\n  const elementWithFocus = getElementWithFocus();\n\n  if (!elementWithFocus) {\n    return null;\n  }\n\n  const { element, caretOffset } = elementWithFocus;\n  const text = element.textContent;\n  const lastAt = text.lastIndexOf(\"@\");\n\n  if (\n    lastAt === -1 ||\n    lastAt >= caretOffset ||\n    (lastAt !== 0 && text[lastAt - 1] !== \" \")\n  ) {\n    return null;\n  }\n\n  return { begin: lastAt, end: caretOffset, text, element };\n}\n\n/**\n *\n * @return {{element: Node, caretOffset: number}}\n */\nexport function getElementWithFocus() {\n  const element = getSelectionStart();\n\n  if (element === null) {\n    return null;\n  }\n\n  let caretOffset = 0;\n  if (typeof window.getSelection != \"undefined\") {\n    const range = window.getSelection().getRangeAt(0);\n    const preCaretRange = range.cloneRange();\n    preCaretRange.selectNodeContents(element);\n    preCaretRange.setEnd(range.endContainer, range.endOffset);\n    caretOffset = preCaretRange.toString().length;\n  } else if (\n    // @ts-ignore\n    typeof document.selection != \"undefined\" &&\n    // @ts-ignore\n    document.selection.type != \"Control\"\n  ) {\n    // @ts-ignore\n    const textRange = document.selection.createRange();\n    // @ts-ignore\n    const preCaretTextRange = document.body.createTextRange();\n    preCaretTextRange.moveToElementText(element);\n    preCaretTextRange.setEndPoint(\"EndToEnd\", textRange);\n    caretOffset = preCaretTextRange.text.length;\n  }\n\n  return { element, caretOffset };\n}\n\n/**\n *\n * @return {Node | null}\n */\nfunction getSelectionStart() {\n  const node = document.getSelection().anchorNode;\n  return node?.nodeType == 3 ? node : null;\n}\n", "// @ts-check\nimport { useCallback, useState } from \"react\";\nimport {\n  deleteTextFromAtToCaret,\n  getElementWithFocus,\n  getTextFromAtToCaret\n} from \"../utils/mention-utils\";\n\n/**\n * @typedef {import('../types/types').MentionUser} MentionUser\n */\n\n// eslint-disable-next-line valid-jsdoc\n/**\n *\n * @param {(text: string) => Promise<MentionUser[]>=} searchMention\n * @returns {{mentionSearchText: string | null, mentionUsers: MentionUser[], onKeyUp: (event: React.KeyboardEvent) => void, onFocus: () => void, onSelectUser: () => void, loading: boolean}}\n */\nexport function useMention(searchMention) {\n  const [loading, setLoading] = useState(false);\n\n  /** @type {[MentionUser[], React.Dispatch<React.SetStateAction<MentionUser[]>>]} */\n  const [mentionUsers, setMentionUsers] = useState([]);\n\n  /** @type {[string | null, React.Dispatch<React.SetStateAction<string | null>>]} */\n  const [mentionSearchText, setMentionSearchText] = useState(null);\n\n  const onSelectUser = useCallback(() => {\n    deleteTextFromAtToCaret();\n    setMentionUsers([]);\n  }, []);\n\n  /** */\n  const checkMentionText = useCallback(async () => {\n    const metionText = getTextFromAtToCaret();\n\n    setMentionSearchText(metionText);\n\n    if (metionText === null) {\n      setMentionUsers([]);\n    } else {\n      setLoading(true);\n      const users = await searchMention(metionText);\n      setLoading(false);\n      setMentionUsers(users);\n    }\n  }, [searchMention]);\n\n  /** @type {(event: React.KeyboardEvent) => void} */\n  const onKeyUp = useCallback(\n    async event => {\n      if (typeof searchMention !== \"function\") return;\n\n      if (\n        event.key === \"Backspace\" &&\n        getElementWithFocus()?.element.parentElement.hasAttribute(\n          \"data-mention-id\"\n        )\n      ) {\n        const elementWithFocus = getElementWithFocus();\n        elementWithFocus.element.parentElement.remove();\n      } else if (\n        ![\"ArrowUp\", \"ArrowDown\", \"Esc\", \"Escape\"].includes(event.key)\n      ) {\n        checkMentionText();\n      }\n    },\n    [checkMentionText, searchMention]\n  );\n\n  const onFocus = useCallback(() => {\n    checkMentionText();\n  }, [checkMentionText]);\n\n  return {\n    mentionSearchText,\n    mentionUsers,\n    onKeyUp,\n    onFocus,\n    onSelectUser,\n    loading\n  };\n}\n", "// @ts-check\n// vendors\nimport React, {\n  useImperativeHandle,\n  useState,\n  forwardRef,\n  useMemo,\n  useEffect\n} from \"react\";\n\n/**\n * @typedef {import('../types/types').MentionUser} MentionUser\n */\n\n/**\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\n */\n\n/**\n * @typedef {Object} Props\n * @property {MentionUser[]} users\n * @property {string | null} mentionSearchText\n * @property {(user: MentionUser) => void} onSelect\n * @property {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void} addEventListener\n */\n\n/**\n * @typedef {{prevUser: () => void; nextUser: () => void;}} Ref\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.ForwardRefRenderFunction<Ref, Props>} */\nconst MentionUserList = (\n  { users, mentionSearchText, onSelect, addEventListener },\n  ref\n) => {\n  const [selectedUser, setSelectedUser] = useState(0);\n\n  useImperativeHandle(ref, () => ({\n    prevUser: () => {\n      setSelectedUser(currentSelectedUser => {\n        if (currentSelectedUser === 0) {\n          return 0;\n        }\n\n        return currentSelectedUser - 1;\n      });\n    },\n    nextUser: () => {\n      setSelectedUser(currentSelectedUser => {\n        if (currentSelectedUser === users.length - 1) {\n          return users.length - 1;\n        }\n\n        return currentSelectedUser + 1;\n      });\n    }\n  }));\n\n  useEffect(() => {\n    setSelectedUser(0);\n  }, [users]);\n\n  /**\n   *\n   * @param {string} selectedText\n   * @param {string} rest\n   * @return {string}\n   */\n  function getMentionSelectedNameEl(selectedText, rest) {\n    return `<span class=\"react-input-emoji--mention--item--name__selected\" data-testid=\"metion-selected-word\">${selectedText}</span>${rest}`;\n  }\n\n  /** @type {(MentionUser & {nameHtml: string})[]} */\n  const usersFiltered = useMemo(() => {\n    const searchText = mentionSearchText\n      ? mentionSearchText.substring(1).toLocaleLowerCase()\n      : \"\";\n    return users.map(user => {\n      let nameHtml = user.name;\n\n      if (mentionSearchText && mentionSearchText.length > 1) {\n        if (user.name.toLowerCase().startsWith(searchText)) {\n          nameHtml = getMentionSelectedNameEl(\n            user.name.substring(0, searchText.length),\n            user.name.substring(searchText.length)\n          );\n        } else {\n          const names = user.name.split(\" \");\n\n          nameHtml = names\n            .map(name => {\n              if (name.toLocaleLowerCase().startsWith(searchText)) {\n                return getMentionSelectedNameEl(\n                  name.substring(0, searchText.length),\n                  name.substring(searchText.length)\n                );\n              }\n              return name;\n            })\n            .join(\" \");\n        }\n      }\n\n      return {\n        ...user,\n        nameHtml\n      };\n    });\n  }, [mentionSearchText, users]);\n\n  // eslint-disable-next-line valid-jsdoc\n  /**\n   *\n   * @param {MentionUser} user\n   * @returns {(event: React.MouseEvent) => void} event\n   */\n  function handleClick(user) {\n    return event => {\n      event.stopPropagation();\n      event.preventDefault();\n\n      onSelect(user);\n    };\n  }\n\n  useEffect(() => {\n    const unsubscribe = addEventListener(\"enter\", event => {\n      event.stopPropagation();\n      event.preventDefault();\n      onSelect(usersFiltered[selectedUser]);\n    });\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onSelect, selectedUser, usersFiltered]);\n\n  return (\n    <ul\n      className=\"react-input-emoji--mention--list\"\n      data-testid=\"mention-user-list\"\n    >\n      {usersFiltered.map((user, index) => (\n        <li key={user.id}>\n          <button\n            type=\"button\"\n            onClick={handleClick(user)}\n            className={`react-input-emoji--mention--item${\n              selectedUser === index\n                ? \" react-input-emoji--mention--item__selected\"\n                : \"\"\n            }`}\n            onMouseOver={() => setSelectedUser(index)}\n          >\n            <img\n              className=\"react-input-emoji--mention--item--img\"\n              src={user.image}\n            />\n            <div\n              className=\"react-input-emoji--mention--item--name\"\n              dangerouslySetInnerHTML={{ __html: user.nameHtml }}\n            />\n          </button>\n        </li>\n      ))}\n    </ul>\n  );\n};\n\nconst MentionUserListWithRef = forwardRef(MentionUserList);\n\nexport default MentionUserListWithRef;\n", "// @ts-check\n// vendors\nimport React, { useEffect, useRef, useState } from \"react\";\n\n// hooks\nimport { useMention } from \"../hooks/use-mention\";\n\n// components\nimport MentionUserList from \"./mention-user-list\";\n\n/**\n * @typedef {import('../types/types').MentionUser} MetionUser\n */\n\n/**\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\n */\n\n/**\n * @typedef {import('../types/types').SanitizeFn} SanitizeFn\n */\n\n/**\n * @typedef {Object} Props\n * @property {(text: string) => Promise<MetionUser[]>=} searchMention\n * @property {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void} addEventListener\n * @property {(html: string) => void} appendContent\n * @property {(fn: SanitizeFn) => void} addSanitizeFn\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** @type {React.FC<Props>} */\nconst MentionWrapper = ({\n  searchMention,\n  addEventListener,\n  appendContent,\n  addSanitizeFn\n}) => {\n  /** @type {React.MutableRefObject<import('./mention-user-list').Ref | null>} */\n  const metionUserListRef = useRef(null);\n  const [showUserList, setShowUserList] = useState(false);\n\n  const {\n    mentionSearchText,\n    mentionUsers,\n    loading,\n    onKeyUp,\n    onFocus,\n    onSelectUser\n  } = useMention(searchMention);\n\n  useEffect(() => {\n    addSanitizeFn(html => {\n      const container = document.createElement(\"div\");\n      container.innerHTML = html;\n\n      const mentionsEl = Array.prototype.slice.call(\n        container.querySelectorAll(\".react-input-emoji--mention--text\")\n      );\n\n      mentionsEl.forEach(mentionEl => {\n        container.innerHTML = container.innerHTML.replace(\n          mentionEl.outerHTML,\n          `@[${mentionEl.dataset.mentionName}](userId:${mentionEl.dataset.mentionId})`\n        );\n      });\n\n      return container.innerHTML;\n    });\n  }, [addSanitizeFn]);\n\n  useEffect(() => {\n    setShowUserList(mentionUsers.length > 0);\n  }, [mentionUsers]);\n\n  useEffect(() => {\n    /** */\n    function checkClickOutside() {\n      setShowUserList(false);\n    }\n\n    document.addEventListener(\"click\", checkClickOutside);\n\n    return () => {\n      document.removeEventListener(\"click\", checkClickOutside);\n    };\n  }, []);\n\n  useEffect(() => {\n    const unsubscribe = addEventListener(\"keyUp\", onKeyUp);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onKeyUp]);\n\n  useEffect(() => {\n    /**\n     *\n     * @param {React.KeyboardEvent} event\n     */\n    function handleKeyDown(event) {\n      switch (event.key) {\n        case \"Esc\": // IE/Edge specific value\n        case \"Escape\":\n          setShowUserList(false);\n          break;\n        default:\n          break;\n      }\n    }\n\n    const unsubscribe = addEventListener(\"keyDown\", handleKeyDown);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener]);\n\n  useEffect(() => {\n    const unsubscribe = addEventListener(\"focus\", onFocus);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onFocus]);\n\n  useEffect(() => {\n    if (showUserList) {\n      const unsubscribeArrowUp = addEventListener(\"arrowUp\", event => {\n        event.stopPropagation();\n        event.preventDefault();\n        metionUserListRef.current.prevUser();\n      });\n\n      const unsubscribeArrowDown = addEventListener(\"arrowDown\", event => {\n        event.stopPropagation();\n        event.preventDefault();\n        metionUserListRef.current.nextUser();\n      });\n\n      return () => {\n        unsubscribeArrowUp();\n        unsubscribeArrowDown();\n      };\n    }\n  }, [addEventListener, showUserList]);\n\n  /**\n   *\n   * @param {MetionUser} user\n   */\n  function handleSelect(user) {\n    onSelectUser();\n    appendContent(\n      `<span class=\"react-input-emoji--mention--text\" data-mention-id=\"${user.id}\" data-mention-name=\"${user.name}\">@${user.name}</span> `\n    );\n  }\n\n  return (\n    <>\n      {loading ? (\n        <div className=\"react-input-emoji--mention--container\">\n          <div className=\"react-input-emoji--mention--loading\">\n            <div className=\"react-input-emoji--mention--loading--spinner\">\n              Loading...\n            </div>\n          </div>\n        </div>\n      ) : (\n        showUserList && (\n          <div\n            className=\"react-input-emoji--mention--container\"\n            onClick={evt => evt.stopPropagation()}\n          >\n            <MentionUserList\n              ref={metionUserListRef}\n              mentionSearchText={mentionSearchText}\n              users={mentionUsers}\n              onSelect={handleSelect}\n              addEventListener={addEventListener}\n            />\n          </div>\n        )\n      )}\n    </>\n  );\n};\n\nexport default MentionWrapper;\n", "// @ts-check\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @template T\n * @returns {import('../types/types').ListenerObj<T>}\n */\nexport function createObserver() {\n  /** @type {import('../types/types').Listerner<T>[]} */\n  let listeners = [];\n\n  return {\n    subscribe: listener => {\n      listeners.push(listener);\n      return () => {\n        listeners = listeners.filter(l => l !== listener);\n      };\n    },\n    publish: event => {\n      listeners.forEach(listener => listener(event));\n    },\n    get currentListerners() {\n      return listeners;\n    }\n  };\n}\n", "// @ts-check\n\nimport { useCallback, useMemo } from \"react\";\nimport { createObserver } from \"../utils/observer\";\n\n/**\n * @typedef {import('../types/types').TextInputListeners} TextInputListeners\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** */\nexport function useEventListeners() {\n  /** @type {TextInputListeners} */\n  const listeners = useMemo(\n    () => ({\n      keyDown: createObserver(),\n      keyUp: createObserver(),\n      arrowUp: createObserver(),\n      arrowDown: createObserver(),\n      enter: createObserver(),\n      focus: createObserver(),\n      blur: createObserver()\n    }),\n    []\n  );\n\n  /**\n   * @template {keyof TextInputListeners} T, K\n   * @type {(event: keyof TextInputListeners, fn: import('../types/types').Listerner<any>) => () => void}\n   */\n  const addEventListener = useCallback(\n    (event, fn) => {\n      return listeners[event].subscribe(fn);\n    },\n    [listeners]\n  );\n\n  return { addEventListener, listeners };\n}\n", "// @ts-check\n\nimport { useCallback, useRef } from \"react\";\n\n/**\n * @typedef {import('../types/types').PolluteFn} PolluteFn\n */\n\n// eslint-disable-next-line valid-jsdoc\n/** */\nexport function usePollute() {\n  /** @type {React.MutableRefObject<PolluteFn[]>} */\n  const polluteFnsRef = useRef([]);\n\n  /** @type {(fn: PolluteFn) => void} */\n  const addPolluteFn = useCallback(fn => {\n    polluteFnsRef.current.push(fn);\n  }, []);\n\n  /** @type {(html: string) => string} */\n  const pollute = useCallback(text => {\n    const result = polluteFnsRef.current.reduce((acc, fn) => {\n      return fn(acc);\n    }, text);\n\n    return result;\n  }, []);\n\n  return { addPolluteFn, pollute };\n}\n", "// @ts-check\n// vendors\nimport React, { useEffect, useRef, forwardRef, useCallback } from \"react\";\n\n// css\nimport \"./styles.css\";\n\n// utils\nimport { replaceAllTextEmojis } from \"./utils/emoji-utils\";\nimport { handleCopy, totalCharacters } from \"./utils/input-event-utils\";\n\n// hooks\nimport { useExpose } from \"./hooks/use-expose\";\nimport { useEmit } from \"./hooks/use-emit\";\n\n// components\nimport TextInput from \"./text-input\";\nimport EmojiPickerWrapper from \"./components/emoji-picker-wrapper\";\nimport MentionWrapper from \"./components/mention-wrapper\";\nimport { useEventListeners } from \"./hooks/use-event-listeners\";\nimport { useSanitize } from \"./hooks/use-sanitize\";\nimport { usePollute } from \"./hooks/user-pollute\";\n\n/**\n * @typedef {import('./types/types').MentionUser} MetionUser\n */\n\n/**\n * @typedef {import('./types/types').ListenerObj<any>} ListenerObj\n */\n\n/**\n * @typedef {object} Props\n * @property {string} value\n * @property {(value: string) => void} onChange\n * @property {\"light\" | \"dark\" | \"auto\"=} theme\n * @property {boolean=} cleanOnEnter\n * @property {(text: string) => void=} onEnter\n * @property {string=} placeholder\n * @property {(size: {width: number, height: number}) => void=} onResize\n * @property {() => void=} onClick\n * @property {() => void=} onFocus\n * @property {() => void=} onBlur\n * @property {boolean=} shouldReturn\n * @property {number=} maxLength\n * @property {boolean=} keepOpened\n * @property {(event: KeyboardEvent) => void=} onKeyDown\n * @property {string=} inputClass\n * @property {boolean=} disableRecent\n * @property {number=} tabIndex\n * @property {number=} height\n * @property {number=} borderRadius\n * @property {string=} borderColor\n * @property {number=} fontSize\n * @property {string=} fontFamily\n * @property {{id: string; name: string; emojis: {id: string; name: string; keywords: string[], skins: {src: string}[]}}[]=} customEmojis\n * @property {import('./types/types').Languages=} language\n * @property {(text: string) => Promise<MetionUser[]>=} searchMention\n * @property {HTMLDivElement=} buttonElement\n * @property {React.MutableRefObject=} buttonRef\n */\n\n/**\n * Input Emoji Component\n * @param {Props} props\n * @param {React.Ref<any>} ref\n * @return {JSX.Element}\n */\nfunction InputEmoji(props, ref) {\n  const {\n    onChange,\n    onEnter,\n    shouldReturn,\n    onResize,\n    onClick,\n    onFocus,\n    onBlur,\n    onKeyDown,\n    theme,\n    cleanOnEnter,\n    placeholder,\n    maxLength,\n    keepOpened,\n    inputClass,\n    disableRecent,\n    tabIndex,\n    value,\n    customEmojis,\n    language,\n    searchMention,\n    buttonElement,\n    buttonRef,\n    // style\n    borderRadius,\n    borderColor,\n    fontSize,\n    fontFamily,\n  } = props;\n\n  /** @type {React.MutableRefObject<import('./text-input').Ref | null>} */\n  const textInputRef = useRef(null);\n\n  const { addEventListener, listeners } = useEventListeners();\n\n  const { addSanitizeFn, sanitize, sanitizedTextRef } = useSanitize(props.shouldReturn);\n\n  const { addPolluteFn, pollute } = usePollute();\n\n  const updateHTML = useCallback(\n    (nextValue = \"\") => {\n      if (textInputRef.current === null) return;\n\n      textInputRef.current.html = replaceAllTextEmojis(nextValue);\n      sanitizedTextRef.current = nextValue;\n    },\n    [sanitizedTextRef]\n  );\n\n  const setValue = useCallback(\n    /**\n     * \n     * @param {string} value\n     */\n    (value) => {\n      updateHTML(value);\n    },\n    [updateHTML]\n  );\n\n  const emitChange = useEmit(textInputRef, onResize, onChange);\n\n  useExpose({\n    ref,\n    setValue,\n    textInputRef,\n    emitChange\n  });\n\n  useEffect(() => {\n    if (sanitizedTextRef.current !== value) {\n      setValue(value);\n    }\n  }, [sanitizedTextRef, setValue, value]);\n\n  // useEffect(() => {\n  //   updateHTML();\n  // }, [updateHTML]);\n\n  useEffect(() => {\n    /**\n     * Handle keydown event\n     * @param {React.KeyboardEvent} event\n     * @return {boolean}\n     */\n    function handleKeydown(event) {\n      if (\n        typeof maxLength !== \"undefined\" &&\n        event.key !== \"Backspace\" &&\n        textInputRef.current !== null &&\n        totalCharacters(textInputRef.current) >= maxLength\n      ) {\n        event.preventDefault();\n      }\n\n      if (event.key === \"Enter\" && textInputRef.current) {\n        event.preventDefault();\n\n        const text = sanitize(textInputRef.current.html);\n\n        emitChange(sanitizedTextRef.current);\n\n        if (\n          typeof onEnter === \"function\" &&\n          listeners.enter.currentListerners.length === 0\n        ) {\n          onEnter(text);\n        }\n\n        if (cleanOnEnter && listeners.enter.currentListerners.length === 0) {\n          updateHTML(\"\");\n        }\n\n        if (typeof onKeyDown === \"function\") {\n          onKeyDown(event.nativeEvent);\n        }\n\n        return false;\n      }\n\n      if (typeof onKeyDown === \"function\") {\n        onKeyDown(event.nativeEvent);\n      }\n\n      return true;\n    }\n\n    const unsubscribe = addEventListener(\"keyDown\", handleKeydown);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [\n    addEventListener,\n    cleanOnEnter,\n    emitChange,\n    listeners.enter.currentListerners.length,\n    maxLength,\n    onEnter,\n    onKeyDown,\n    sanitize,\n    sanitizedTextRef,\n    updateHTML\n  ]);\n\n  useEffect(() => {\n    /** */\n    function handleFocus() {\n      if (typeof onClick === \"function\") {\n        onClick();\n      }\n\n      if (typeof onFocus === \"function\") {\n        onFocus();\n      }\n    }\n\n    const unsubscribe = addEventListener(\"focus\", handleFocus);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onClick, onFocus]);\n\n  useEffect(() => {\n    /** */\n    function handleBlur() {\n      if (typeof onBlur === \"function\") {\n        onBlur();\n      }\n    }\n\n    const unsubscribe = addEventListener(\"blur\", handleBlur);\n\n    return () => {\n      unsubscribe();\n    };\n  }, [addEventListener, onBlur]);\n\n  /**\n   *\n   * @param {string} html\n   */\n  function handleTextInputChange(html) {\n    sanitize(html);\n\n    if (value !== sanitizedTextRef.current) {\n      emitChange(sanitizedTextRef.current);\n    }\n  }\n\n  /**\n   *\n   * @param {string} html\n   */\n  function appendContent(html) {\n    if (\n      typeof maxLength !== \"undefined\" &&\n      textInputRef.current !== null &&\n      totalCharacters(textInputRef.current) >= maxLength\n    ) {\n      return;\n    }\n\n    if (textInputRef.current !== null) {\n      textInputRef.current.appendContent(html);\n    }\n  }\n\n  /**\n   * Handle past on input\n   * @param {React.ClipboardEvent} event\n   */\n  function handlePaste(event) {\n    event.preventDefault();\n    let content;\n    if (event.clipboardData) {\n      content = event.clipboardData.getData(\"text/plain\");\n      content = pollute(content);\n      document.execCommand(\"insertHTML\", false, content);\n    }\n  }\n\n  return (\n    <div className=\"react-emoji\">\n      <MentionWrapper\n        searchMention={searchMention}\n        addEventListener={addEventListener}\n        appendContent={appendContent}\n        addSanitizeFn={addSanitizeFn}\n      />\n      <TextInput\n        ref={textInputRef}\n        onCopy={handleCopy}\n        onPaste={handlePaste}\n        shouldReturn={shouldReturn}\n        onBlur={listeners.blur.publish}\n        onFocus={listeners.focus.publish}\n        onArrowUp={listeners.arrowUp.publish}\n        onArrowDown={listeners.arrowDown.publish}\n        onKeyUp={listeners.keyUp.publish}\n        onKeyDown={listeners.keyDown.publish}\n        onEnter={listeners.enter.publish}\n        placeholder={placeholder}\n        style={{\n          borderRadius,\n          borderColor,\n          fontSize,\n          fontFamily\n        }}\n        tabIndex={tabIndex}\n        className={inputClass}\n        onChange={handleTextInputChange}\n      />\n      <EmojiPickerWrapper\n        theme={theme}\n        keepOpened={keepOpened}\n        disableRecent={disableRecent}\n        customEmojis={customEmojis}\n        addSanitizeFn={addSanitizeFn}\n        addPolluteFn={addPolluteFn}\n        appendContent={appendContent}\n        buttonElement={buttonElement}\n        buttonRef={buttonRef}\n        language={language}\n      />\n    </div>\n  );\n}\n\nconst InputEmojiWithRef = forwardRef(InputEmoji);\n\nInputEmojiWithRef.defaultProps = {\n  theme: /** @type {const} */ (\"auto\"),\n  height: 30,\n  placeholder: \"Type a message\",\n  borderRadius: 21,\n  borderColor: \"#EAEAEA\",\n  fontSize: 15,\n  fontFamily: \"sans-serif\",\n  tabIndex: 0,\n  shouldReturn: false,\n  customEmojis: [],\n  language: undefined,\n};\n\nexport default InputEmojiWithRef;\n"],
  "mappings": ";;;;;;;;;;;;;;AAAA,SAASA,YAAYC,KAAKC,KAAK;AAC7B,MAAKA,QAAQ;AAASA,UAAM,CAAA;AAC5B,MAAIC,WAAWD,IAAIC;AAEnB,MAAI,CAACF,OAAO,OAAOG,aAAa,aAAa;AAAE;EAAQ;AAEvD,MAAIC,OAAOD,SAASC,QAAQD,SAASE,qBAAqB,MAAM,EAAE,CAAC;AACnE,MAAIC,QAAQH,SAASI,cAAc,OAAO;AAC1CD,QAAME,OAAO;AAEb,MAAIN,aAAa,OAAO;AACtB,QAAIE,KAAKK,YAAY;AACnBL,WAAKM,aAAaJ,OAAOF,KAAKK,UAAU;IAC1C,OAAO;AACLL,WAAKO,YAAYL,KAAK;IACxB;EACF,OAAO;AACLF,SAAKO,YAAYL,KAAK;EACxB;AAEA,MAAIA,MAAMM,YAAY;AACpBN,UAAMM,WAAWC,UAAUb;EAC7B,OAAO;AACLM,UAAMK,YAAYR,SAASW,eAAed,GAAG,CAAC;EAChD;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBO,IAAMe,kBACX;AASK,SAASC,qBAAqBC,MAAM;AACzC,MAAIC,YAAYC,qBAAqBF,IAAI;AAEzC,MAAIC,WAAW;AACbA,gBAASE,mBAAO,IAAIC,IAAIH,SAAS,CAAC;AAElCA,cAAUI,QAAQ,SAAAC,OAAS;AACzBN,aAAOO,WAAWP,MAAMM,OAAOE,kBAAkB,IAAIF,KAAK,CAAC;IAC7D,CAAC;EACH;AAEA,SAAON;AACT;AASA,SAASO,WAAWE,KAAKC,MAAMC,SAAS;AACtC,SAAOF,IAAIE,QAAQ,IAAIC,OAAOF,MAAM,GAAG,GAAGC,OAAO;AACnD;AAOA,SAAST,qBAAqBF,MAAM;AAClC,SAAOA,KAAKa,MACV,mVACF;AACF;AAQO,SAASC,cAAcR,OAAO;AAAA,MAAAS;AAEnC,MAAMC,gBAAgB9B,SAAS+B,cAAc,iBAAiB;AAE9D,MAAI,CAACD,eAAe;AAClB,WAAOE,wBAAwBZ,MAAK,QAAA,CAAO;EAC7C;AAGA,MAAMa,cAAcH,kBAAAA,QAAAA,kBAAa,WAAAD,wBAAbC,cAAeI,gBAAU,QAAAL,0BAAzBA,SAAAA,SAAAA,sBAA2BE,cAAaI,WAAAA,OAAYf,MAAMgB,MAAI,kBAAA,CAAkB;AAEpG,MAAI,CAACH,aAAa;AAChB,WAAOD,wBAAwBZ,MAAK,QAAA,CAAO;EAC7C;AAEA,MAAMjB,QAAQkB,WAAWY,YAAY9B,MAAMO,SAAS,KAAK,GAAG;AAE5D,SAAOY,kBAAkBnB,OAAOiB,MAAK,QAAA,CAAO;AAC9C;AASA,SAASE,kBAAkBnB,OAAOiB,OAAO;AACvC,SAAAe,eAAAA,OAAsBhC,OAAKgC,uCAAAA,EAAAA,OAAwCf,OAAK,SAAA,EAAAe,OAAUvB,iBAAe,MAAA;AACnG;AAOA,SAASoB,wBAAwBZ,OAAO;AACtC,SAAAe,kFAAAA,OAAyFf,OAAK,SAAA;AAChG;AAOO,SAASiB,4BAA4BC,MAAM;AAChD,MAAMC,YAAYvC,SAASI,cAAc,KAAK;AAC9CmC,YAAUC,YAAYF;AAEtB,MAAMG,SAASC,MAAMC,UAAUC,MAAMC,KAAKN,UAAUO,iBAAiB,KAAK,CAAC;AAE3EL,SAAOtB,QAAQ,SAAA4B,OAAS;AACtBR,cAAUC,YAAYD,UAAUC,UAAUf,QACxCsB,MAAMC,WACND,MAAME,QAAQ7B,KAChB;EACF,CAAC;AAED,SAAOmB,UAAUC;AACnB;ACtGO,SAASU,WAAWC,OAAO;AAChC,MAAMC,eAAeC,OAAOC,aAAY;AAExC,MAAIF,iBAAiB,MAAM;AACzB;EACF;AAEA,MAAIb,YAAYvC,SAASI,cAAc,KAAK;AAE5C,WAASmD,IAAI,GAAGC,MAAMJ,aAAaK,YAAYF,IAAIC,KAAK,EAAED,GAAG;AAC3DhB,cAAU/B,YAAY4C,aAAaM,WAAWH,CAAC,EAAEI,cAAa,CAAE;EAClE;AAEApB,cAAYqB,qBAAqBrB,SAAS;AAE1CY,QAAMU,cAAcC,QAAQ,QAAQvB,UAAUwB,SAAS;AACvDZ,QAAMa,eAAc;AACtB;AAMO,SAASC,uBAAuB3B,MAAM;AAC3C,MAAI4B;AACJ,MAAIC;AACJ,MAAId,OAAOC,cAAc;AAEvBY,UAAMb,OAAOC,aAAY;AAEzB,QAAIY,QAAQ;AAAM;AAElB,QAAIA,IAAIR,cAAcQ,IAAIT,YAAY;AACpCU,cAAQD,IAAIR,WAAW,CAAC;AACxBS,YAAMC,eAAc;AAIpB,UAAMC,KAAKrE,SAASI,cAAc,KAAK;AACvCiE,SAAG7B,YAAYF;AACf,UAAMgC,OAAOtE,SAASuE,uBAAsB;AAC5C,UAAIC;AACJ,UAAIC;AACJ,aAAQD,OAAOH,GAAG/D,YAAa;AAC7BmE,mBAAWH,KAAK9D,YAAYgE,IAAI;MAClC;AACAL,YAAMO,WAAWJ,IAAI;AAGrB,UAAIG,UAAU;AACZN,gBAAQA,MAAMQ,WAAU;AACxBR,cAAMS,cAAcH,QAAQ;AAC5BN,cAAMU,SAAS,IAAI;AACnBX,YAAIY,gBAAe;AACnBZ,YAAIa,SAASZ,KAAK;MACpB;IACF;EACF;AACF;AAOA,SAASP,qBAAqBrB,WAAW;AACvC,MAAME,SAASC,MAAMC,UAAUC,MAAMC,KAAKN,UAAUO,iBAAiB,KAAK,CAAC;AAE3EL,SAAOtB,QAAQ,SAAC4B,OAAU;AACxBA,UAAMC,YAAYD,MAAME,QAAQ7B;EAClC,CAAC;AAED,SAAOmB;AACT;AAsEO,SAASyC,gBAAeC,OAAiB;AAAA,MAAdnE,OAAImE,MAAJnE,MAAMwB,OAAI2C,MAAJ3C;AACtC,MAAM4C,YAAYpE,KAAKqE;AACvB,MAAMC,eAAe9C,KAAKX,MAAM,OAAO,KAAK,CAAA,GAAIwD;AAEhD,SAAOD,YAAYE;AACrB;AA2DO,SAASC,mBAAmBC,UAAU;AAC3C,MAAMC,OAAOD,SAAS9C,UAAUf,QAAQ,gBAAgB,MAAM;AAC9D,MAAM+D,WAAWD,KAAK9D,QAAQ,YAAY,EAAE;AAC5C,MAAMgE,SAAQD,SAAS/D,QAAQ,YAAY,OAAO;AAClD,SAAOgE;AACT;AAOO,SAASC,oBAAkBvB,OAAO;AACvC,MAAIK,OAAOL,MAAMwB;AACjB,MAAIC,SAASzB,MAAM0B;AAGnB,MAAIrB,KAAKsB,aAAaC,KAAKC,WAAW;AACpC,WAAOxB,KAAKsB,aAAaC,KAAKC,WAAW;AACvCxB,aAAOA,KAAKyB;AACZ,UAAI,CAACzB;AAAM;IACb;AACA,QAAI,CAACA,MAAM;AACTA,aAAOL,MAAM+B;AACb,aAAO1B,KAAKsB,aAAaC,KAAKC,WAAW;AACvCxB,eAAOA,KAAKlE;MACd;IACF;AACAsF,aAAS;EACX;AAEA,SAAO;IAAEpB;IAAMoB;;AACjB;AAMO,SAASO,YAAY;AAC1B,MAAMC,YAAY/C,OAAOC,aAAY;AACrC,MAAMa,QAAQiC,UAAU1C,WAAW,CAAC;AACpC,MAAM2C,iBAAiBX,oBAAkBvB,KAAK;AAE9C,SAAQ;IAACiC;IAAWjC;IAAOkC;;AAC7B;AAKO,SAASC,eAAe;AAC7B,MAAAC,aAA6CJ,UAAS,GAA9CC,YAASG,WAATH,WAAWjC,QAAKoC,WAALpC,OAAOkC,iBAAcE,WAAdF;AAG1B,MACED,UAAUI,eACVH,eAAeT,WAAWS,eAAe7B,KAAKiC,YAAYtB,QAC1D;AACA,QAAMuB,KAAK1G,SAASI,cAAc,IAAI;AACtC+D,UAAMO,WAAWgC,EAAE;AACnBvC,UAAMS,cAAc8B,EAAE;AACtBvC,UAAMwC,YAAYD,EAAE;AACpBN,cAAUtB,gBAAe;AACzBsB,cAAUrB,SAASZ,KAAK;AAExB,QAAMyC,MAAM5G,SAASI,cAAc,IAAI;AACvC+D,UAAMO,WAAWkC,GAAG;AACpBzC,UAAMS,cAAcgC,GAAG;AACvBzC,UAAMwC,YAAYC,GAAG;AACrBR,cAAUtB,gBAAe;AACzBsB,cAAUrB,SAASZ,KAAK;EAC1B,OAAO;AACL,QAAMuC,MAAK1G,SAASI,cAAc,IAAI;AACtC+D,UAAMO,WAAWgC,GAAE;AACnBvC,UAAMS,cAAc8B,GAAE;AACtBvC,UAAMwC,YAAYD,GAAE;AACpBN,cAAUtB,gBAAe;AACzBsB,cAAUrB,SAASZ,KAAK;AAExB,QACEkC,eAAe7B,KAAKyB,eACpBI,eAAe7B,KAAKyB,YAAYH,aAAaC,KAAKC,WAClD;AACA7B,YAAM0C,SAASR,eAAe7B,KAAKyB,aAAa,CAAC;AACjD9B,YAAM2C,OAAOT,eAAe7B,KAAKyB,aAAa,CAAC;IACjD;AACAG,cAAUtB,gBAAe;AACzBsB,cAAUrB,SAASZ,KAAK;EAC1B;AACF;ACtSO,SAAS4C,YAAYC,cAAc;AAExC,MAAMC,qBAAiBC,qBAAO,CAAA,CAAE;AAEhC,MAAMC,uBAAmBD,qBAAO,EAAE;AAGlC,MAAME,oBAAgBC,0BAAY,SAAAC,IAAM;AACtCL,mBAAeM,QAAQC,KAAKF,EAAE;KAC7B,CAAA,CAAE;AAGL,MAAMG,eAAWJ,0BAAY,SAAA/E,MAAQ;AACnC,QAAIoF,SAAST,eAAeM,QAAQI,OAAO,SAACC,KAAKN,IAAO;AACtD,aAAOA,GAAGM,GAAG;OACZtF,IAAI;AAEPoF,aAASG,uBAAuBH,QAAQV,YAAY;AAEpDG,qBAAiBI,UAAUG;AAE3B,WAAOA;KACN,CAAA,CAAE;AAEL,SAAO;IAAEN;IAAeK;IAAUN;;AACpC;AAQO,SAASU,uBAAuBvF,MAAM0E,cAAc;AACzD,MAAMzE,YAAYvC,SAASI,cAAc,KAAK;AAC9CmC,YAAUC,YAAYF;AACtB,MAAIxB;AACJ,MAAGkG,cAAc;AACflG,WAAOuE,mBAAmB9C,SAAS;EACrC,OAAO;AACLzB,WAAOyB,UAAUwB,aAAa;EAChC;AAGAjD,SAAOA,KAAKW,QAAQ,QAAQ,EAAE;AAE9B,SAAOX;AACT;AC3CO,SAASgH,UAASC,MAA8C;AAAA,MAA3CjI,MAAGiI,KAAHjI,KAAKkI,eAAYD,KAAZC,cAAcC,WAAQF,KAARE,UAAUC,aAAUH,KAAVG;AACvD,MAAAC,eAAuCpB,YAAY,KAAK,GAAhDU,WAAQU,aAARV,UAAUN,mBAAgBgB,aAAhBhB;AAElBiB,wCAAoBtI,KAAK,WAAA;AAAA,WAAO;MAC9B,IAAIuI,QAAQ;AACV,eAAOlB,iBAAiBI;;MAE1B,IAAIc,MAAMA,OAAO;AACfJ,iBAASI,KAAK;;MAEhBC,OAAO,SAAAA,QAAM;AACX,YAAIN,aAAaT,YAAY;AAAM;AACnCS,qBAAaT,QAAQe,MAAK;;MAE5BC,MAAM,SAAAA,OAAM;AACV,YAAIP,aAAaT,YAAY,MAAM;AACjCE,mBAASO,aAAaT,QAAQjF,IAAI;QAEpC;AAEA4F,mBAAU;MACZ;;EACD,CAAC;AACJ;AC7BO,SAASM,QAAQR,cAAcS,UAAUC,UAAU;AAExD,MAAMC,qBAAiBzB,qBAAO,IAAI;AAClC,MAAM0B,iBAAa1B,qBAAOwB,QAAQ;AAElC,MAAMG,yBAAqBxB,0BAAY,WAAM;AAC3C,QAAIW,aAAaT,YAAY,MAAM;AACjC,UAAMuB,cAAcH,eAAepB;AAEnC,UAAMwB,WAAWf,aAAaT,QAAQyB;AAEtC,WACG,CAACF,eACAA,YAAYG,UAAUF,SAASE,SAC/BH,YAAYI,WAAWH,SAASG,WAClC,OAAOT,aAAa,YACpB;AACAA,iBAASM,QAAQ;MACnB;AAEAJ,qBAAepB,UAAUwB;IAC3B;EACF,GAAG,CAACN,UAAUT,YAAY,CAAC;AAE3B,MAAME,iBAAab,0BAAY,SAAC8B,eAAkB;AAChD,QAAI,OAAOP,WAAWrB,YAAY,YAAY;AAC5CqB,iBAAWrB,QAAQ4B,aAAa;IAClC;AAEA,QAAI,OAAOV,aAAa,YAAY;AAClCI,yBAAkB;IACpB;EACF,GAAG,CAACA,oBAAoBJ,QAAQ,CAAC;AAEjCW,8BAAU,WAAM;AACd,QAAIpB,aAAaT,SAAS;AACxBsB,yBAAkB;IACpB;EACF,GAAG,CAACA,oBAAoBb,YAAY,CAAC;AAErC,SAAOE;AACT;;ACdA,IAAMmB,YAAY,SAAZA,WAAStB,MAEbjI,KACG;AAAA,MAFDwJ,cAAWvB,KAAXuB,aAAanJ,QAAK4H,KAAL5H,OAAOoJ,WAAQxB,KAARwB,UAAUC,YAASzB,KAATyB,WAAWd,WAAQX,KAARW,UAAae,QAAKC,yBAAA3B,MAAA4B,SAAA;AAG7DvB,wCAAoBtI,KAAK,WAAA;AAAA,WAAO;MAC9B8J,eAAe,SAAAA,cAAAtH,MAAQ;AACrB,YAAI0F,aAAaT,SAAS;AACxBS,uBAAaT,QAAQe,MAAK;QAC5B;AAEArE,+BAAuB3B,IAAI;AAE3B,YAAI0F,aAAaT,SAAS;AACxBS,uBAAaT,QAAQe,MAAK;QAC5B;AAEA,YAAIN,aAAaT,WAAWsC,eAAetC,WAAWlF,4BAA4B2F,aAAaT,QAAQ/E,SAAS,MAAM,IAAI;AACxHqH,yBAAetC,QAAQpH,MAAM2J,aAAa;QAC5C,WAAWD,eAAetC,SAAS;AACjCsC,yBAAetC,QAAQpH,MAAM2J,aAAa;QAC5C;AAEA,YAAI9B,aAAaT,WAAW,OAAOmB,aAAa,YAAY;AAC1DA,mBAASV,aAAaT,QAAQ/E,SAAS;QACzC;;MAEF,IAAIF,KAAK+F,OAAO;AACd,YAAIL,aAAaT,SAAS;AACxBS,uBAAaT,QAAQ/E,YAAY6F;QACnC;AAEA,YAAIwB,eAAetC,SAAS;AAC1B,cAAMzG,OAAOuB,4BAA4BgG,KAAK;AAC9C,cAAIvH,SAAS,IAAI;AACf+I,2BAAetC,QAAQpH,MAAM2J,aAAa;UAC5C,OAAO;AACLD,2BAAetC,QAAQpH,MAAM2J,aAAa;UAC5C;QACF;AAEA,YAAI,OAAOpB,aAAa,cAAcV,aAAaT,SAAS;AAC1DmB,mBAASV,aAAaT,QAAQ/E,SAAS;QACzC;;MAEF,IAAIF,OAAO;AACT,YAAI,CAAC0F,aAAaT;AAAS,iBAAO;AAElC,eAAOS,aAAaT,QAAQ/E;;MAE9B,IAAI1B,OAAO;AACT,YAAI,CAACkH,aAAaT;AAAS,iBAAO;AAElC,eAAOS,aAAaT,QAAQxD;;MAE9B,IAAIiF,OAAO;AACT,YAAI,CAAChB,aAAaT,SAAS;AACzB,iBAAO;YACL0B,OAAO;YACPC,QAAQ;;QAEZ;AAEA,eAAO;UACLD,OAAOjB,aAAaT,QAAQwC;UAC5Bb,QAAQlB,aAAaT,QAAQyC;;;MAGjC1B,OAAK,SAAAA,QAAG;AACN,YAAI,CAACN,aAAaT;AAAS;AAE3BS,qBAAaT,QAAQe,MAAK;MAC5B;;EACD,CAAC;AAGF,MAAMuB,qBAAiB3C,qBAAO,IAAI;AAElC,MAAMc,mBAAed,qBAAO,IAAI;AAMhC,WAAS+C,cAAc9G,OAAO;AAC5B,QAAIA,MAAM+G,QAAQ,YAAY/G,MAAMgH,aAAa,QAAQhH,MAAMiH,YAAY,SAASX,MAAMzC,cAAc;AACtG7D,YAAMa,eAAc;AACpB,UAAGgE,aAAaT,SAAS;AACvBjB,qBAAY;AACZ;MACF;IACF;AACA,QAAInD,MAAM+G,QAAQ,SAAS;AACzBT,YAAMY,QAAQlH,KAAK;IACrB,WAAWA,MAAM+G,QAAQ,WAAW;AAClCT,YAAMa,UAAUnH,KAAK;IACvB,WAAWA,MAAM+G,QAAQ,aAAa;AACpCT,YAAMc,YAAYpH,KAAK;IACzB,OAAO;AACL,UAAIA,MAAM+G,IAAI/E,WAAW,KAAK0E,eAAetC,SAAS;AACpDsC,uBAAetC,QAAQpH,MAAM2J,aAAa;MAC5C;IACF;AAEAL,UAAMe,UAAUrH,KAAK;EACvB;AAGA,WAASsH,cAAc;AACrBhB,UAAMiB,QAAO;EACf;AAMA,WAASC,YAAYxH,OAAO;AAC1BsG,UAAMmB,QAAQzH,KAAK;AAEnB,QAAM0H,QAAQ7C,aAAaT;AAE3B,QAAIsC,eAAetC,WAAWsD,OAAO;AACnC,UAAM/J,OAAOuB,4BAA4BwI,MAAMrI,SAAS;AACxD,UAAI1B,SAAS,IAAI;AACf+I,uBAAetC,QAAQpH,MAAM2J,aAAa;MAC5C,OAAO;AACLD,uBAAetC,QAAQpH,MAAM2J,aAAa;MAC5C;IACF;AAEA,QAAI,OAAOpB,aAAa,cAAcV,aAAaT,SAAS;AAC1DmB,eAASV,aAAaT,QAAQ/E,SAAS;IACzC;EACF;AAEA,SACEsI,aAAAA,QAAA1K,cAAA,OAAA;IAAKoJ,WAAU;IAA+BrJ;KAC5C2K,aAAAA,QAAA1K,cAAA,OAAA;IAAKoJ,WAAU;IAA6BuB,SAASN;KACnDK,aAAAA,QAAA1K,cAAA,OAAA;IAAKN,KAAK+J;IAAgBL,WAAU;EAAgC,GACjEF,WACE,GACLwB,aAAAA,QAAA1K,cAAA,OAAA;IACEN,KAAKkI;IACLwC,WAAWP;IACXW,SAASD;IACTpB;IACAyB,iBAAe;IACfxB,WAAS,2BAAArH,OAA6BqH,YAAS,IAAArH,OAAOqH,SAAS,IAAK,EAAE;IAEtEyB,QAAQxB,MAAMwB;IACdC,QAAQzB,MAAMyB;IACdC,SAAS1B,MAAM0B;IACf,eAAY;GACb,CACE,CACF;AAET;AAEA,IAAMC,uBAAmBC,yBAAWhC,SAAS;ACpL7C,SAASiC,kBAAiBvD,MAA6D;AAAA,MAA1DwD,aAAUxD,KAAVwD,YAAYC,mBAAgBzD,KAAhByD,kBAAkBC,gBAAa1D,KAAb0D,eAAeC,YAAS3D,KAAT2D;AAExE,MAAMC,qBAAiBzE,qBAAO,IAAI;AAClC,MAAA0E,gBAA8DC,uBAAS,KAAK,GAACC,aAAAC,eAAAH,WAAA,CAAA,GAAtEI,0BAAuBF,WAAA,CAAA,GAAEG,6BAA0BH,WAAA,CAAA;AAE1D1C,8BAAU,WAAM;AAAA,QAAA8C,uBAAAC,oBAAAC,uBAAAC;AACd,UAAIH,wBAACR,cAAS,QAATA,cAAS,WAAAS,qBAATT,UAAWnE,aAAO4E,QAAAA,uBAAA,WAAAA,qBAAlBA,mBAAoBG,gBAAU,QAAAH,uBAAA,SAAA,SAA9BA,mBAAgChH,YAAM+G,QAAAA,0BAAA,SAAAA,wBAAI,KAAK,GAAG;AACrDP,qBAAepE,QAAQ/G,YAAYkL,UAAUnE,QAAQ+E,WAAW,CAAC,CAAC;AAClEL,iCAA2B,IAAI;IACjC,aAAWG,wBAACX,kBAAAA,QAAAA,kBAAaY,WAAAA,yBAAbZ,cAAea,gBAAUD,QAAAA,2BAAzBA,SAAAA,SAAAA,uBAA2BlH,YAAMiH,QAAAA,0BAAAA,SAAAA,wBAAI,KAAK,GAAG;AACvDT,qBAAepE,QAAQ/G,YAAYiL,kBAAa,QAAbA,kBAAa,SAAA,SAAbA,cAAea,WAAW,CAAC,CAAC;AAC/DL,iCAA2B,IAAI;IACjC;KACC,CAACR,kBAAAA,QAAAA,kBAAa,SAAA,SAAbA,cAAea,UAAU,CAAC;AAE9B,SACExB,aAAAA,QAAA1K,cAAA,UAAA;IACEN,KAAK6L;IACLtL,MAAK;IACLmJ,WAAS,4BAAArH,OACPoJ,aAAa,qCAAqC,EAAE;IAEtDR,SAASS;EAAiB,GAEzB,CAACQ,2BACAlB,aAAAA,QAAA1K,cAAA,OAAA;IACEmM,OAAM;IACNC,SAAQ;IACRvD,OAAM;IACNC,QAAO;IACPM,WAAU;KAGVsB,aAAAA,QAAA1K,cAAA,QAAA;IAAMqM,GAAE;EAA+I,CAAE,GAEzJ3B,aAAAA,QAAA1K,cAAA,QAAA;IAAMqM,GAAE;GAA4K,CACjL,CAED;AAEZ;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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",
  "names": ["styleInject", "css", "ref", "insertAt", "document", "head", "getElementsByTagName", "style", "createElement", "type", "firstChild", "insertBefore", "appendChild", "styleSheet", "cssText", "createTextNode", "TRANSPARENT_GIF", "replaceAllTextEmojis", "text", "allEmojis", "getAllEmojisFromText", "_toConsumableArray", "Set", "forEach", "emoji", "replaceAll", "getInputEmojiHTML", "str", "find", "replace", "RegExp", "match", "getImageEmoji", "_emojiPickerEl$shadow", "emojiPickerEl", "querySelector", "getInputEmojiNativeHTML", "emojiSpanEl", "shadowRoot", "concat", "name", "replaceAllTextEmojiToString", "html", "container", "innerHTML", "images", "Array", "prototype", "slice", "call", "querySelectorAll", "image", "outerHTML", "dataset", "handleCopy", "event", "selectedText", "window", "getSelection", "i", "len", "rangeCount", "getRangeAt", "cloneContents", "replaceEmojiToString", "clipboardData", "setData", "innerText", "preventDefault", "handlePasteHtmlAtCaret", "sel", "range", "deleteContents", "el", "frag", "createDocumentFragment", "node", "lastNode", "insertNode", "cloneRange", "setStartAfter", "collapse", "removeAllRanges", "addRange", "totalCharacters", "_ref2", "textCount", "length", "emojisCount", "removeHtmlExceptBr", "inputDiv", "temp", "stripped", "final", "getSelectionStart", "startContainer", "offset", "startOffset", "nodeType", "Node", "TEXT_NODE", "nextSibling", "commonAncestorContainer", "getCursor", "selection", "selectionStart", "addLineBreak", "_getCursor", "isCollapsed", "textContent", "br", "setEndAfter", "br2", "setStart", "setEnd", "useSanitize", "shouldReturn", "sanitizeFnsRef", "useRef", "sanitizedTextRef", "addSanitizeFn", "useCallback", "fn", "current", "push", "sanitize", "result", "reduce", "acc", "replaceAllHtmlToString", "useExpose", "_ref", "textInputRef", "setValue", "emitChange", "_useSanitize", "useImperativeHandle", "value", "focus", "blur", "useEmit", "onResize", "onChange", "currentSizeRef", "onChangeFn", "checkAndEmitResize", "currentSize", "nextSize", "size", "width", "height", "sanitizedText", "useEffect", "TextInput", "placeholder", "tabIndex", "className", "props", "_objectWithoutProperties", "_excluded", "appendContent", "placeholderRef", "visibility", "offsetWidth", "offsetHeight", "handleKeyDown", "key", "shiftKey", "ctrlKey", "onEnter", "onArrowUp", "onArrowDown", "onKeyDown", "handleClick", "onFocus", "handleKeyUp", "onKeyUp", "input", "React", "onClick", "contentEditable", "onBlur", "onCopy", "onPaste", "TextInputWithRef", "forwardRef", "EmojiPickerButton", "showPicker", "toggleShowPicker", "buttonElement", "buttonRef", "localButtonRef", "_useState", "useState", "_useState2", "_slicedToArray", "showCustomButtonContent", "setShowCustomButtonContent", "_buttonRef$current$ch", "_buttonRef$current", "_buttonElement$childN", "_buttonElement$childN2", "childNodes", "xmlns", "viewBox", "d", "$e5534fc185f7111e$export$2e2bcd8739ae039", "$dvPge$useRef", "instance", "update", "$dvPge$useEffect", "$dvPge$Picker", "$dvPge$react", "EmojiPicker", "theme", "onSelectEmoji", "disableRecent", "customEmojis", "language", "categories", "useMemo", "categoryies", "i18n", "undefined", "require", "Picker", "data", "previewPosition", "onEmojiSelect", "custom", "set", "memo", "EmojiPickerContainer", "handleSelectEmoji", "position", "evt", "stopPropagation", "top", "EMOJI_PICKER_CONTAINER_HEIGHT", "EmojiPickerWrapper", "keepOpened", "addPolluteFn", "setShowPicker", "_useState3", "_useState4", "customButton", "setCustomButton", "_useState5", "_useState6", "emojiPickerPosition", "setEmojiPickerPosition", "checkClickOutside", "element", "target", "classList", "contains", "addEventListener", "removeEventListener", "calcTopPosition", "currentShowPicker", "btn", "currentTarget", "btnRect", "getBoundingClientRect", "popoverHeight", "ReactDOM", "createPortal", "Fragment", "getTextFromAtToCaret", "getRangeFromAtToCaret", "substring", "begin", "end", "deleteTextFromAtToCaret", "deleteData", "elementWithFocus", "getElementWithFocus", "caretOffset", "lastAt", "lastIndexOf", "preCaretRange", "selectNodeContents", "endContainer", "endOffset", "toString", "textRange", "createRange", "preCaretTextRange", "body", "createTextRange", "moveToElementText", "setEndPoint", "anchorNode", "useMention", "searchMention", "loading", "setLoading", "mentionUsers", "setMentionUsers", "mentionSearchText", "setMentionSearchText", "onSelectUser", "checkMentionText", "_asyncToGenerator", "_regeneratorRuntime", "mark", "_callee", "metionText", "users", "wrap", "_callee$", "_context", "prev", "next", "sent", "stop", "_x", "_callee2", "_getElementWithFocus", "_callee2$", "_context2", "abrupt", "parentElement", "hasAttribute", "remove", "includes", "apply", "arguments", "MentionUserList", "onSelect", "selectedUser", "setSelectedUser", "prevUser", "currentSelectedUser", "nextUser", "getMentionSelectedNameEl", "rest", "usersFiltered", "searchText", "toLocaleLowerCase", "map", "user", "nameHtml", "toLowerCase", "startsWith", "names", "split", "join", "_objectSpread", "unsubscribe", "index", "id", "onMouseOver", "src", "dangerouslySetInnerHTML", "__html", "MentionUserListWithRef", "MentionWrapper", "metionUserListRef", "showUserList", "setShowUserList", "_useMention", "mentionsEl", "mentionEl", "mentionName", "mentionId", "unsubscribeArrowUp", "unsubscribeArrowDown", "handleSelect", "createObserver", "listeners", "subscribe", "listener", "filter", "l", "publish", "currentListerners", "useEventListeners", "keyDown", "keyUp", "arrowUp", "arrowDown", "enter", "usePollute", "polluteFnsRef", "pollute", "InputEmoji", "cleanOnEnter", "maxLength", "inputClass", "borderRadius", "borderColor", "fontSize", "fontFamily", "_useEventListeners", "_usePollute", "updateHTML", "nextValue", "handleKeydown", "nativeEvent", "handleFocus", "handleBlur", "handleTextInputChange", "handlePaste", "content", "getData", "execCommand", "InputEmojiWithRef", "defaultProps"]
}
